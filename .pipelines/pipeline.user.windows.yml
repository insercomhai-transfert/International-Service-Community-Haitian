environment:
  host:
    os: windows
    flavor: datacenter
    version: 2016
  runtime:
    provider: appcontainer
    image: 'cdpxwin.azurecr.io/legacy/global/vse2017u5-external-azsdk-ext-win14393.1884:1.1-node10'
    source_mode: map

restore:
  commands: 
    - !!defaultcommand
      name: 'NPM Install'
      command: 'scripts/npmInstall.cmd'

build:
  commands:
    - !!testcommand
      name: 'NPM Test'
      command: 'scripts/npmTest.cmd'
      fail_on_stderr: true
    - !!buildcommand
      name: 'Process Templates'
      command: 'scripts/ProcessTemplates.ps1'
      fail_on_stderr: true
      artifacts:
        - from: '..\ProcessedTemplates.json'
  
